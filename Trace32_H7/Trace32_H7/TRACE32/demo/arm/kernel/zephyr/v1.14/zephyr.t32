;@Extension.Container.Version.1
;-- DO NOT CHANGE THE LINE ABOVE --
IF (VERSION.BUILD.BASE()<138311.)
(
  PRINTF %ERROR "%s: Software too old, please contact support@lauterbach.com." "Zephyr"
  ENDDO
)

PMACRO.EXPLICIT
PRIVATE &sParamline &sPpf &sCmd &sParameters &sAccess &sAccessSpaces &sAccessMachine &sOptionAccess &sOptionAccessMisc &sName &sMachine &sArguments &nVariant
PRIVATE &bTaskConfig &bExtLoad &bCleanup
ENTRY &sCmd %LINE &sParamline
&sParameters=STRing.SCANAndExtract("&sParamline","PARAMETERS=","")
&sAccess=STRing.SCANAndExtract("&sParamline","ACCESS=","")
&sAccessSpaces=STRing.SCANAndExtract("&sParamline","ACCESSSPACES=","")
&sAccessMachine=STRing.SCANAndExtract("&sParamline","ACCESSMACHINE=","")
&sName=STRing.SCANAndExtract("&sParamline","NAME=","")
&sMachine=STRing.SCANAndExtract("&sParamline","MACHINE=","")
&sArguments=STRing.SCANAndExtract("&sParamline","ARGUMENTS=","")

&sParameters=STRing.Replace("&sParameters","""","",0.)
IF ("&sArguments"!="")
  &sArguments=&sArguments
IF ("&sAccess"!="")
  &sOptionAccess="/ACCESS &sAccess"
IF ("&sAccessSpaces"!="")
  &sOptionAccessMisc="/ACCESSSPACES &sAccessSpaces"
IF ("&sAccessMachine"!="")
  &sOptionAccessMisc="&(sOptionAccessMisc) /ACCESSMACHINE &sAccessMachine"
&sName=STRing.Replace("&sName","""","",0.)

&bTaskConfig=STRing.SCAN("task.config,ext.config",STRing.LoWeR("&sCmd"),0.)>=0.
&bExtLoad=STRing.SCAN("ext.load",STRing.LoWeR("&sCmd"),0.)>=0.
&bCleanup=STRing.SCAN("task.res,ext.res,ext.delete",STRing.LoWeR("&sCmd"),0.)>=0.
&sPpf=OS.PresentPracticeFile()

IF (&bTaskConfig||&bExtLoad)
(
  IF ("&nVariant"!="32.")&&("&nVariant"!="64.")
  (
    IF CPUIS64BIT()
      &nVariant="64."
    ELSE
      &nVariant="32."
  )

  IF STRing.ComPare("&sArguments","*32BIT*")
    &nVariant="32."
  ELSE IF STRing.ComPare("&sArguments","*64BIT*")
    &nVariant="64."
)

IF (&bTaskConfig)
(
  PRIVATE &sMachineName
  &sMachineName="Zephyr"
  TASK.RESet
  IF (&nVariant==32.)
  (
    GOSUB extension_32bit "&sParameters" "&sOptionAccess"
    IF !STRing.Compare("&sArguments","*MENU=NONE*")
      GOSUB menu_32bit "&sMachineName" ""
    GOSUB autoload_32bit ""
  )
  ELSE IF (&nVariant==64.)
  (
    PRINTF %ERROR "%s: No support for %ubit, please contact support@lauterbach.com." "Zephyr" &nVariant
  )
)
ELSE IF (&bExtLoad)
(
  PRIVATE &sMachineName &sInfix &sOptionName &sOptionMachine
  &sInfix=""
  &sMachineName="Zephyr"
  IF ("&sName"!="")
  (
    &sInfix=STRing.UPpeR("&(sName).")
    &sMachineName="&(sName)"
    &sOptionName="/NAME &sMachineName"
  )
  ELSE IF PRACTICE.FUNCtion.AVAILable(SYStem.Option.MACHINESPACES)
  (
    IF SYStem.Option.MACHINESPACES()
      &sInfix=TASK.TRANSPOSE.INFIX(OS.FILE.BASENAME("&sPpf",".**"))+"."
  )
  IF ("&sMachine"!="")
  (
    &sOptionMachine="/MACHINE &sMachine"
  )
  IF (&nVariant==32.)
  (
    GOSUB extension_32bit "&sParameters" "&sOptionAccess &sOptionAccessMisc &sOptionName &sOptionMachine"
    IF !STRing.Compare("&sArguments","*MENU=NONE*")
      GOSUB menu_32bit "&sMachineName" "&sInfix"
    GOSUB autoload_32bit "&sOptionMachine"
  )
  ELSE IF (&nVariant==64.)
  (
    PRINTF %ERROR "%s: No support for %ubit, please contact support@lauterbach.com." "Zephyr" &nVariant
  )
)
ELSE IF (&bCleanup)
(
  PRIVATE &sMachineName &sOptionMachine

  &sMachineName="Zephyr"
  IF ("&sName"!="")
  (
    &sMachineName="&(sName)"
  )
  IF ("&sMachine"!="")
  (
    &sOptionMachine="/MACHINE &sMachine"
  )
  IF STRing.SCAN(HELP.FILTER(),"rtoszephyr",0.)>=0.
    HELP.FILTER.Delete rtoszephyr
  GOSUB menu_delete "&sMachineName"
  GOSUB autoload_delete "&sOptionMachine"
)

ENDDO

extension_32bit: ; (options)
(
  PARAMETERS &sParameters &sOptions
  EXTension.LOAD &sParameters &sOptions
  (
  VDMyTQAwMDMuMDAxQCgjKVRSQUNFMzIgY29uZmlndXJhdGlvbiBmaWxlIFYwMDMuMDAxIDogYXJt
  L3plcGh5cgAAAAAAAAAAdGwAADCsZGwAAAN0ZGEABAAAZXAAAAAkaHMABAaEAABURVhUAAECAwAA
  I7AAACZQAAAAAAAAAAAAAAAAAAAAAAAAAABOgAAglCH/8HwIAqaQAQAUPGAAADhjCZBIACJ9PGAA
  ADhjCcxIACJZSAANLUgADplIABAFSAARiUgAEulIABSZSAAWTUgAGcFIABfdSAAbcUgAHMFIAB5R
  PGAAADhjHvBIACIpSAAgpUgAIYlIAB+VPGAABDhjA2RIACMBgAEAFHwIA6Y4IQAQToAAIJQh//B8
  CAKmkAEAFDhgAAFIACJBPSAABIEpBkx8CRhAQIEATD0gAASBKQXwPUAABIFKBix9KVIUPUAABIFK
  BWx9KVIUPUAABIFKBgR8Y1HWfGkaFD0gAASQaQVwgAEAFHwIA6Y4IQAQToAAIDxgAAA4YyZUSAAi
  bThgAABL//+olCH/4HwIAqaQAQAkk4EAEJOhABSTwQAYk+EAHDxgAAA4YyZ8SAAhcT0gAASQaQVs
  PGAAADhjJnRIACF1PGAAADhjJoRIACFdPSAABJBpBfA8YAAAOGMmjEgAIUk9IAAEkGkGEDxgAAA4
  YyaYSAAhKTkjAAEoCQABQIEF8D0gAASQaQZMPGAAADhjJqxIACEhPSAABJBpBgQ8YAAAOGMmuEgA
  IQE9IAAEkGkGLEv//tU9IAAEgSkFbD1AAASBSgYQfSlSFD1AAASRKgVoPGAAADhjJsRIACDZPGAA
  ADhjJtRIACDBPSAABJBpBcA8YAAAOGMm6EgAIK09IAAEkGkFeDxgAAA4Yyb8SAAgmT0gAASQaQX8
  PGAAADhjJwhIACCFPSAABJBpBhw8YAAAOGMnGEgAIHE9IAAEkGkF3DxgAAA4YycgSAAgXT0gAASQ
  aQWcPGAAADhjJzBIACBJPSAABJBpBkg8YAAAOGMnREgAIDU9IAAEkGkGQDxgAAA4YydYSAAgFT0g
  AASQaQVkPGAAADhjJ2xIACAZP8AAADveJ3x/w/N4SAAf/T0gAASQaQV8PGAAADhjJ4RIAB/pPSAA
  BJBpBYQ8YAAAOGMnjEgAH9U9IAAEkGkGXD/gAAA7/yeUf+P7eEgAH709IAAEkGkGDDxgAAA4Yyec
  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
  ToAAIDhABFN8ghAIToAAIDhABSF8ghAIToAAIDhABwF8ghAIToAAIDhABwR8ghAIToAAIDhACAF8
  ghAIToAAIDhACAJ8ghAIToAAIDhACgF8ghAIToAAIDhACgJ8ghAIToAAIDhAChR8ghAIToAAIDhA
  CwF8ghAIToAAIL4CAwQAAAAFAEBWRVJTSU9OLUlORk9AADk4MjUAAAAAAAAAAAAAAAAAAAAAAAAA
  AAAAAAAAAAAAAAAmYQAAB+gAAAABAAAAHwAAAAAAAAAAAAAAAGh0dHBzOi8vc3ZuLmludGVybi5s
  YXV0ZXJiYWNoLmNvbS9zdm4va2VybmVsc3JjL3RhZ3MvY2QvMjAyM18wOV9yZWxlYXNlX3NwMgAA
  AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAaHR0cHM6
  Ly9zdm4uaW50ZXJuLmxhdXRlcmJhY2guY29tL3N2bi9rZXJuZWxzcmMAAAAAAAAAAAAAAAAAAAAA
  AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
  AAAAAAAAAABiYXVtZWlzdGVyAAAAAAAAZWRrLWxpbnV4NjRiaXQtNAAAAAAAAAAAAAAAAAAAAAAA
  AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEdDQyA5LjUuMAAAAAAAAAAAAAAAAAAAAAAA
  AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
  AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH6AAAAAEAAAAf
  AAAAUgAAJMwAAAfnAAAACQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAmYlplcGh5cgAAAAAAAAAAAAAA
  AAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
  AABjb3JlIG5vdCBjb25maWd1cmVkIGZvciBaZXBoeXIAAHN0cnVjdCB6X2tlcm5lbAAuY3B1cwAA
  AC50aHJlYWRzAAAAAENPTkZJR19NUF9OVU1fQ1BVUwAAc3RydWN0IF9jcHUALmN1cnJlbnQAAAAA
  c3RydWN0IGtfdGhyZWFkAC5iYXNlLnFub2RlX2RsaXN0AAAALmJhc2UudGhyZWFkX3N0YXRlAAAu
  YmFzZS5wcmlvAAAuY2FsbGVlX3NhdmVkAAAALmVudHJ5AAAubmV4dF90aHJlYWQAAAAALnN0YWNr
  X2luZm8uc3RhcnQAAAAuc3RhY2tfaW5mby5zaXplAAAAAF90cmFjZV9saXN0X2tfc2VtAAAAc3Ry
  dWN0IGtfc2VtAAAAAC53YWl0X3EALmNvdW50AAAubGltaXQAAC5fX25leHQAX3RyYWNlX2xpc3Rf
  a19tdXRleABzdHJ1Y3Qga19tdXRleAAALm93bmVyAAAubG9ja19jb3VudABfdHJhY2VfbGlzdF9r
  X2FsZXJ0AHN0cnVjdCBrX2FsZXJ0AAAuaGFuZGxlcgAAAAAuc2VuZF9jb3VudAAuc2VtAAAAAF90
  cmFjZV9saXN0X2tfcXVldWUAc3RydWN0IGtfcXVldWUAAC5kYXRhX3EAX3RyYWNlX2xpc3Rfa19z
  dGFjawBzdHJ1Y3Qga19zdGFjawAALmJhc2UAAAAubmV4dAAAAC50b3AAAAAAX3RyYWNlX2xpc3Rf
  a19tc2dxAABzdHJ1Y3Qga19tc2dxAAAALm1zZ19zaXplAAAALm1heF9tc2dzAAAALmJ1ZmZlcl9z
  dGFydAAAAC51c2VkX21zZ3MAAF90cmFjZV9saXN0X2tfbWJveAAAc3RydWN0IGtfbWJveAAAAC50
  eF9tc2dfcXVldWUAAAAucnhfbXNnX3F1ZXVlAAAAX3RyYWNlX2xpc3Rfa19waXBlAABzdHJ1Y3Qg
  a19waXBlAAAALmJ1ZmZlcgAuc2l6ZQAAAC5ieXRlc191c2VkAF90cmFjZV9saXN0X2tfbWVtX3Ns
  YWIAAHN0cnVjdCBrX21lbV9zbGFiAAAALm51bV9ibG9ja3MALmJsb2NrX3NpemUALm51bV91c2Vk
  AAAAX3RyYWNlX2xpc3Rfa190aW1lcgBzdHJ1Y3Qga190aW1lcgAALmV4cGlyeV9mbgAALnBlcmlv
  ZABzeXNfZGxpc3RfdAAuaGVhZAAAAHN0cnVjdCBfY2FsbGVlX3NhdmVkAAAAAC5wc3AAAAAAJTNk
  LgAAAAAlZC4Abm9uZQAAAAAlOHgATGlzdCAleABubyB0aHJlYWQgbGlzdCBhdmFpbGFibGUgKGtl
  cm5lbCB3aXRob3V0IENPTkZJR19USFJFQURfTU9OSVRPUj8pCgAAAFZhci5WaWV3ICUlT3BlbiAo
  c3RydWN0IGtfdGhyZWFkKikleAAAAABUQVNLLlRIUkVBRABydW5uaW5nAHJlYWR5AAAAZHVtbXkA
  AABkZWFkAAAAAHByZXN0YXJ0AAAAAHBlbmRpbmcAc3VzcGVuZGVkAAAAcG9sbGluZwAoJTJ4KQAA
  AG1hZ2ljICAgIAAAAHByaW8gAAAAc3RhdGUgICAgAAAAZW50cnkgICAAAAAAQCg9KV9fUlRPU19a
  RVBIWVJfX1RBU0tfVEhSRUFEAABjb3VudAAAAGxpbWl0AAAAd2FpdGluZyAAAAAAbWlzc2luZyBz
  ZW1hcGhvcmUgbGlzdCAtIENPTkZJR19PQkpFQ1RfVFJBQ0lORz8AU0VNQVBIT1JFAAAAU0VNYXBo
  b3JlAAAAQCg9KV9fUlRPU19aRVBIWVJfX1RBU0tfU0VNAG93bmVyICAgIAAAAG1pc3NpbmcgbXV0
  ZXggbGlzdCAtIENPTkZJR19PQkpFQ1RfVFJBQ0lORz8AQCg9KV9fUlRPU19aRVBIWVJfX1RBU0tf
  TVVURVgAAABoYW5kbGVyIAAAAABtaXNzaW5nIGFsZXJ0IGxpc3QgLSBDT05GSUdfT0JKRUNUX1RS
  QUNJTkc/AEAoPSlfX1JUT1NfWkVQSFlSX19UQVNLX0FMRVJUAAAAZmlyc3QgZGF0YSBpdGVtAG1p
  c3NpbmcgcXVldWUgbGlzdCAtIENPTkZJR19PQkpFQ1RfVFJBQ0lORz8AQCg9KV9fUlRPU19aRVBI
  WVJfX1RBU0tfUVVFVUUAAABiYXNlICAgICAAAABtYXggAAAAAHVzZWQAAAAAbWlzc2luZyBzdGFj
  ayBsaXN0IC0gQ09ORklHX09CSkVDVF9UUkFDSU5HPwBAKD0pX19SVE9TX1pFUEhZUl9fVEFTS19a
  U1RBQ0sAAGJ1ZmZlciAgIAAAAG1zZ3NpemUAbWlzc2luZyBtc2dxIGxpc3QgLSBDT05GSUdfT0JK
  RUNUX1RSQUNJTkc/AABAKD0pX19SVE9TX1pFUEhZUl9fVEFTS19NU0dRAAAAAG1pc3NpbmcgcGlw
  ZSBsaXN0IC0gQ09ORklHX09CSkVDVF9UUkFDSU5HPwAAUElQRQAAAABAKD0pX19SVE9TX1pFUEhZ
  Ul9fVEFTS19QSVBFX1YxNwAAAAB0eDogAAAAAHJ4OiAAAAAAbWlzc2luZyBtYWlsYm94IGxpc3Qg
  LSBDT05GSUdfT0JKRUNUX1RSQUNJTkc/AAAATUFJTEJPWABNYWlsQk9YAEAoPSlfX1JUT1NfWkVQ
  SFlSX19UQVNLX01CT1gAAAAAYmxrc2l6ZQAjYmxrcwAAACN1c2VkAAAAbWlzc2luZyBtZW1zbGFi
  IGxpc3QgLSBDT05GSUdfT0JKRUNUX1RSQUNJTkc/AAAAQCg9KV9fUlRPU19aRVBIWVJfX1RBU0tf
  TUVNU0xBQgBwZXJpb2QAAGV4cGlyeSBmbgAAAG1pc3NpbmcgdGltZXIgbGlzdCAtIENPTkZJR19P
  QkpFQ1RfVFJBQ0lORz8AQCg9KV9fUlRPU19aRVBIWVJfX1RBU0tfVElNRVIAAAAlQGNNVEQgVmVy
  c2lvbiAgJXMgICVzICAlMDJ1LiUwMnUuJTA0dSAoQnVpbGQgJXMpCgoAbWFnaWMgICAgICAgICAg
  ICU4eCAgJTh4ICAAAGtlcm5lbCAgICAgICAgICAlOHggICU4eCAgAAB0aHJlYWQgbGlzdCAgICAg
  JTh4ICAAAABURVNUAAAAAGFyZ3VtZW50ICAgICAgICB2YWx1ZSAgICAgY29udGVudCAgIHN5bWJv
  bAAAcGFyYW1ldGVyIDE6IDB4JTh4ID0gJXMAbWFnaWMAAABtYWdpY3NpemUAAAB1bmtub3duIHRv
  cGljAAAAVEFTSy5DT05GSUcAX19SVE9TX1pFUEhZUl9fRlVOQwAtLS0gIFRBU0sgIG1hZ2ljID0g
  JTh4AAAgIG5hbWUgPSAlcyAgLS0tAAAAAF9fUlRPU19aRVBIWVJfX0FMAAAAX19SVE9TX1pFUEhZ
  Ul9fQVMAAABaZXBoeXIgdjEuMTQAAAAAQVJNAERBVEEAAAADAEEAAAAEACQAAAqsAAArRAAAK0QA
  ACtEAAArLAAACngAACsAAAArDAAAKxQAACsgAAAAAAAAAAMAUAAAAAQAbAAADfwAAAACAAAAAAAA
  K2gAAAAAAAArmAAAK8gAACukAAArsAAADaAAACsAAAArTAAAK1QAACtcAAAAAAAAAAMAUAAAAAQA
  tAAAD2wAAAACAAAAAAAAK9gAAAAAAAAsHAAALBwAACwcAAAsBAAADxAAACsAAAArTAAAK8wAACtc
  AAAAAAAAAAMAUAAAAAQA/AAAENwAAAACAAAAAAAALDAAAAAAAAAsdAAALHQAACx0AAAsXAAAEIAA
  ACsAAAArTAAAK1QAACwkAAAAAAAAAAMAUAAAAAQBRAAAEmQAAAACAAAAAAAALIwAAAAAAAAs0AAA
  LNAAACzQAAAsuAAAEggAACsAAAAsfAAAK1wAAAAAAAAAAwBQAAAABAGIAAATyAAAAAIAAAAAAAAs
  9AAAAAAAAC04AAAtOAAALTgAAC0gAAATbAAAKwAAACzYAAAs5AAALOwAACtcAAAAAAAAAAMAUAAA
  AAQB1AAAFXwAAAACAAAAAAAALVQAAAAAAAAtmAAALZgAAC2YAAAtgAAAFSAAACsAAAAtQAAALOQA
  ACzsAAAtTAAAK1wAAAAAAAAAAwBQAAAABAIkAAAXNAAAAAIAAAAAAAAtoAAAAAAAAC3MAAAtzAAA
  LcwAAC3UAAAW2AAAKwAAAC1AAAAnUAAALOwAACtcAAAAAAAAAAMAUAAAAAQCcAAAGMwAAAACAAAA
  AAAALggAAAAAAAAuOAAALmAAAC5AAAAuSAAAGHAAACsAAAArXAAAAAAAAAADAFAAAAAEArAAABqs
  AAAAAgAAAAAAAC6AAAAAAAAALsgAAC7IAAAuyAAALrAAABpQAAArAAAALUAAAC5oAAAucAAALngA
  ACtcAAAAAAAAAAMAUAAAAAQDAAAAHGQAAAACAAAAAAAALuQAAAAAAAAvKAAALygAAC8oAAAvEAAA
  HAgAACsAAAAu0AAALtgAAAAAAAAAAQA8AAAAAC+8AAAdkAAAL7QAAC+0AAArKAAAKygAAB1cAAAw
  JAAAAAMAAAAXAAAAAAAAMDAAAB+MAAAgcAAAIMwAADBwAAAgSAAAMIQAACFUAAArKAAAMJgAADCo
  AAAAAFQzMkU=
  )
  HELP.FILTER.Add rtoszephyr
  RETURN
)

menu_32bit: ;(header, infix)
(
  PMACRO.LOCK
  (
    PRIVATE &sHeader &sInfix &sMenuName
    PARAMETERS &sHeader &sInfix
    &sMenuName=TASK.TRANSPOSE.INFIX("&sHeader")
    IF MENU.EXIST("TASK.&(sMenuName)")
      MENU.Delete.NAME TASK.&(sMenuName)
    IF MENU.EXIST("EXT.&(sMenuName)")
      MENU.Delete.NAME EXT.&(sMenuName)
    MENU.ReProgram
    (&+
; --------------------------------------------------------------------------------
; @Title: Zephyr specific menu
; @Description: -
; @Author: DIE
; @Copyright: (c) 1989-2022 Lauterbach GmbH, licensed for use with TRACE32(R) only
; --------------------------------------------------------------------------------
; $Id: zephyr.m 7861 2022-07-29 13:45:42Z amerkle $

NAME "TASK.&sMenuName"

IF !MENU.EXIST("TASK.&sMenuName")
(

add
menu
(
  popup "&sHeader"
  (
    default
    menuitem "Display &Threads"         "TASK.&(sInfix)THREAD"
    menuitem "Display &Semaphores"      "TASK.&(sInfix)SEMaphore"
    menuitem "Display &Mutexes"         "TASK.&(sInfix)MUTEX"
    menuitem "Display &Alerts"          "TASK.&(sInfix)ALERT"
    menuitem "Display &Fifos && Lifos"  "TASK.&(sInfix)QUEUE"
    menuitem "Display &Stacks"          "TASK.&(sInfix)ZSTACK"
    menuitem "Display &Message Queues"  "TASK.&(sInfix)MSGQ"
    menuitem "Display &Mailboxes"       "TASK.&(sInfix)MailBOX"
    menuitem "Display &Pipes"           "TASK.&(sInfix)PIPE"
    menuitem "Display &Memory Slabs"    "TASK.&(sInfix)MEMSLAB"
    ;menuitem "Display &Memory Pools"    "TASK.&(sInfix)MEMPOOL"
    menuitem "Display &Timers"          "TASK.&(sInfix)TIMER"
    separator
    popup "&Stack Coverage"
    (
      menuitem "&List Stacks"    "TASK.&(sInfix)STacK.view"
      menuitem "Add Task"        "TASK.&(sInfix)STacK.ADD"
      menuitem "Remove Task"     "TASK.&(sInfix)STacK.RM"
      menuitem "Reset Coverage"
      (
        PRIVATE &yes
        DIALOG.YESNO "Overwrite unused stack space" "with stack fill pattern?"
        ENTRY &yes
        IF !&yes
          ENDDO
        TASK.&(sInfix)STacK.Init
      )
    )
  )
  popup "Trace"
  (
    popup "[:alist]List"
    (
      separator
      menuitem "&Task Switches"     "Trace.List List.TASK"
      menuitem "&Default and Tasks" "Trace.List List.TASK DEFault"
    )
  )
  popup "Perf"
  (
    separator
    popup "&Task Runtime"
    (
      menuitem "&Prepare"
      (
        if t.method.analyzer()
        (
          Analyzer.AutoInit on
        )
        if trace.flow()
        (
          Break.Delete /TraceEnable
          Break.Set task.config(magic) /Write /TraceEnable
        )
        Trace.Init
      )
      menuitem "[:perf]Show &Numerical"   "Trace.STATistic.TASK"
      menuitem "[:achart]Show as &Timing" "Trace.CHART.TASK"
      menuitem "[:achart]Tracking with Trace &List"
      (
        Trace.List List.TASK DEFault /Track
        Trace.CHART.TASK /Track
      )
    )
    popup "Task &Function Runtime"
    (
      menuitem "&Prepare"
      (
        if t.method.analyzer()
        (
          Analyzer.AutoInit on
          Analyzer.STATistic.PreFetch on
        )
        if trace.flow()
        (
          Break.Delete /TraceData
          Break.Set task.config(magic) /Write /TraceData
        )
        Trace.Init
      )
      menuitem "[:perf]Show &Numerical"     "Trace.STATistic.TASKFUNC"
      menuitem "[:perf]Show as &Tree"       "Trace.STATistic.TASKTREE"
      menuitem "[:perf]Show &Detailed Tree" "Trace.STATistic.TASKTREE ALL"
      menuitem "[:achart]Show as &Timing"   "Trace.CHART.TASKFUNC"
      menuitem "[:alist]Show N&esting"      "Trace.List List.TASK FUNC TI.FUNC"
    )
    popup "Task &Status"
    (
      menuitem "&Prepare"
      (
        if t.method.analyzer()
        (
          Analyzer.AutoInit on
        )
      )
      menuitem "[:perf]Show &Numerical"   "Trace.STATistic.TASKSTATE"
      menuitem "[:achart]Show as &Timing" "Trace.CHART.TASKSTATE"
      menuitem "[:achart]Tracking with Trace &List"
      (
        Trace.List List.TASK DEFault /Track
        Trace.CHART.TASKSTATE /Track
      )
    )
  )
  popup "&Help"
  (
    menuitem "Linux Awareness Manual" "HELP __RTOS_ZEPHYR_"
  )
)


menu "task.&(sInfix)thread"
(
  default
  ;menuitem "Display detailed"
  ;(
  ;  &address=address.offset(track.address())
  ;  TASK.Thread &address
  ;)
  menuitem "Display thread struct"
  (
    PRIVATE &pAddress
    &pAddress=TRACK.ADDRESS()
    Var.View %Open (struct k_thread*)(&pAddress)
  )
  separator
  menuitem "Display Stack Frame"
  (
    PRIVATE &nAddress
    &nAddress=ADDRESS.OFFSET(TRACK.ADDRESS())
    Frame /Locals /Caller /Task &nAddress
  )
  menuitem "Display Registers"
  (
    PRIVATE &nAddress
    &nAddress=ADDRESS.OFFSET(TRACK.ADDRESS())
    Register /TASK &nAddress
  )
  menuitem "Switch Context"
  (
    PRIVATE &nAddress
    &nAddress=ADDRESS.OFFSET(TRACK.ADDRESS())
    Register.TASK &nAddress
  )
  separator
  menuitem "Add to Stack Cov"
  (
    PRIVATE &nAddress
    &nAddress=ADDRESS.OFFSET(TRACK.ADDRESS())
    TASK.&(sInfix)STacK.ADD &nAddress
  )
  menuitem "Rm from Stack Cov"
  (
    PRIVATE &nAddress
    &nAddress=ADDRESS.OFFSET(TRACK.ADDRESS())
    TASK.&(sInfix)STacK.RM &nAddress
  )
  separator
  menuitem "Dump thread entry"
  (
    PRIVATE &pAddress
    &pAddress=TRACK.ADDRESS()
    Data.dump &pAddress /Long /DIALOG
  )
)

)
    )
  )
  PMACRO.UNLOCK
  RETURN
)

autoload_32bit: ;(options)
(
  PARAMETERS &sOptions
  RETURN
)



menu_delete: ;(header)
(
  PRIVATE &sHeader &sMenuName
  PARAMETERS &sHeader
  &sMenuName=TASK.TRANSPOSE.INFIX("&sHeader")
  IF MENU.EXIST("TASK.&(sMenuName)")
    MENU.Delete.NAME TASK.&(sMenuName)
  IF MENU.EXIST("EXT.&(sMenuName)")
    MENU.Delete.NAME EXT.&(sMenuName)
  RETURN
)

autoload_delete: ;(options)
(
  PARAMETERS &sOptionMachine
  RETURN
)
